<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<meta property="og:title" content="shiny.utf8" />
<meta property="og:type" content="book" />








<meta name="description" content="shiny.utf8">

<title>shiny.utf8</title>

<link href="libs/tufte-css-2015.12.29/tufte.css" rel="stylesheet" />
<link href="libs/tufte-css-2015.12.29/envisioned.css" rel="stylesheet" />
<link href="libs/msmb-css-0/msmb.css" rel="stylesheet" />


<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
code.sourceCode > span { display: inline-block; line-height: 1.25; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
code.sourceCode > span:empty { height: 1.2em; }

code.sourceCode { white-space: pre; position: relative; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>



</head>

<body>




<!--bookdown:toc:start-->
<div id="TOC">
<ul class="navbar">
<li class="msmb"><p class="title"><p><p class="author"></p>
<li class="dropdown" style="float:right">
<a href="javascript:void(0)" class="dropbtn">&#x25BE; Chapters</a>
<div class="dropdown-content">
<a href="#shiny"><span class="toc-section-number">1</span> Shiny</a>
</div>
</li>
</ul>
</div>
<!--bookdown:toc:end-->

<!--bookdown:body:start-->
<div id="shiny" class="section level1">
<h1><span class="header-section-number">Chapter 1</span> Shiny</h1>
<!-- Advanced students should combine simply Shiny with a package, as in [Shiny Apps as Packages](https://rtask.thinkr.fr/blog/building-a-shiny-app-as-a-package/). -->
<!-- Might also make more use of Mastery Shiny. Build this appendix around that book. -->
</div>
<div id="helpful-resources" class="section level2">
<h2><span class="header-section-number">1.1</span> Helpful Resources</h2>
<p>There are a number of resources on Shiny to get you started, so definitely take a look at the following materials in addition to using this guide:</p>
<ul>
<li><p><a href="https://shiny.rstudio.com/tutorial/">Shiny Video Tutorials</a> is a comprehensive video tutorial that goes through all of the basics of building a Shiny app and adding customization. It is 2 and a half hours long, but individual chapters can be found at the same link for walk throughs on smaller topics. The first 40 or so minutes of the tutorial are particularly helpful in getting a basic app running and available on shinyapps.io.</p></li>
<li><p><a href="https://shiny.rstudio.com/tutorial/written-tutorial/lesson1/">Shiny Written Tutorials</a> is also quite comprehensive, and walks through templates for the example Shiny document. It breaks down the set up of UI, control widgets, reactive output (like dropdown variables), using R scripts and data, using reactive expressions, and sharing the app.</p></li>
<li><p><a href="https://mastering-shiny.org/"><em>Mastering Shiny</em></a> by Hadley Wickham is a really nice guide to using Shiny and best practices for higher-quality apps, including reducing code duplication.</p></li>
</ul>
</div>
<div id="set-up-and-getting-started" class="section level2">
<h2><span class="header-section-number">1.2</span> Set Up and Getting Started</h2>
<ul>
<li><p>Sign up for a Shiny account at <a href="https://www.shinyapps.io/">https://www.shinyapps.io/</a>.</p></li>
<li><p>Install the Shiny package with: <strong>install.packages(“shiny”)</strong></p></li>
<li><p>Create a Shiny app from RStudio with: <strong>File &gt; New File &gt; Shiny Web App…</strong></p></li>
<li><p>In the popup, choose Single File (app.R) - this doesn’t particularly matter, but is the way that the Preceptor taught in class, and is the way that his example is set up. If you would prefer to have two separate files for ui and server, this is also valid and might allow for cleaner code.</p></li>
<li><p>You should now have a functioning example Shiny App - click <strong>Run App</strong> or use the keyboard shortcut <strong>Cmd/Ctrl + Shift + Enter</strong> to see this app in action! You can view it in a new window, or in an external web browser (see the dropdown arrow next to <strong>Run App</strong> for the options). Notice that the example includes a slider that allows the viewer to change the number of the bins that the histogram has.</p></li>
</ul>
</div>
<div id="building-your-basic-app" class="section level2">
<h2><span class="header-section-number">1.3</span> Building Your Basic App</h2>
<p>Now that you have your functioning Shiny App up and running, let’s take a closer look at our files and directories. Notice that the app.R file has been created within a directory. It is important to remember that only the files within this directory will be accessible to the app when it is online. Taking a look at the app.R file, we can see that there are four necessary elements in this file that create the working app:</p>
<ul>
<li>First, it calls <strong>library(shiny)</strong></li>
<li>Then, it defines a user interface with <strong>ui &lt;- fluidPage(…)</strong></li>
<li>It also defines server logic, which takes in an input from the UI, and produces an output based on that input, as defined by <strong>server &lt;- function(input, output) {…}</strong></li>
<li>Finally, it calls <strong>shinyApp(ui, server)</strong> to run the app.</li>
</ul>
<div id="setting-up-the-basic-ui" class="section level3">
<h3><span class="header-section-number">1.3.1</span> Setting Up the Basic UI</h3>
<p>According to the Preceptor, the Gov 1005 Final Projects should be formatted such that they have three tabs, as well as an embedded video. A basic set up for that might be something like this:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb1-1"><a href="#cb1-1"></a>ui &lt;- navbarPage(</span>
<span id="cb1-2"><a href="#cb1-2"></a>  &quot;Final Project Title&quot;,</span>
<span id="cb1-3"><a href="#cb1-3"></a>  tabPanel(&quot;Model&quot;,</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="bn">           fluidPage(</span></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="bn">              titlePanel(&quot;Model Title&quot;),</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="bn">              sidebarLayout(</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="bn">                  sidebarPanel(</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="bn">                      selectInput(</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="bn">                          &quot;plot_type&quot;,</span></span>
<span id="cb1-10"><a href="#cb1-10"></a><span class="bn">                          &quot;Plot Type&quot;,</span></span>
<span id="cb1-11"><a href="#cb1-11"></a><span class="bn">                          c(&quot;Option A&quot; = &quot;a&quot;, &quot;Option B&quot; = &quot;b&quot;)</span></span>
<span id="cb1-12"><a href="#cb1-12"></a><span class="bn">                      )),</span></span>
<span id="cb1-13"><a href="#cb1-13"></a><span class="bn">                  mainPanel(plotOutput(&quot;line_plot&quot;)))</span></span>
<span id="cb1-14"><a href="#cb1-14"></a><span class="bn">             )),</span></span>
<span id="cb1-15"><a href="#cb1-15"></a>  tabPanel(&quot;Discussion&quot;,</span>
<span id="cb1-16"><a href="#cb1-16"></a><span class="bn">           titlePanel(&quot;Discussion Title&quot;),</span></span>
<span id="cb1-17"><a href="#cb1-17"></a><span class="bn">           p(&quot;Tour of the modeling choices you made and </span></span>
<span id="cb1-18"><a href="#cb1-18"></a><span class="bn">              an explanation of why you made them&quot;)),</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>  tabPanel(&quot;About&quot;, </span>
<span id="cb1-20"><a href="#cb1-20"></a><span class="bn">          titlePanel(&quot;About&quot;),</span></span>
<span id="cb1-21"><a href="#cb1-21"></a><span class="bn">          h3(&quot;Project Background and Motivations&quot;),</span></span>
<span id="cb1-22"><a href="#cb1-22"></a><span class="bn">          p(&quot;Hello, this is where I talk about my project.&quot;),</span></span>
<span id="cb1-23"><a href="#cb1-23"></a><span class="bn">          h3(&quot;About Me&quot;),</span></span>
<span id="cb1-24"><a href="#cb1-24"></a><span class="bn">          p(&quot;My name is ______ and I study ______. </span></span>
<span id="cb1-25"><a href="#cb1-25"></a><span class="bn">             You can reach me at ______@college.harvard.edu.&quot;)))</span></span></code></pre></div>
<p>You can run the example app in this repo to see this code in action. Breaking this code down, we have created a navigation bar page with three tabs. The first tab will display the model, and has two potential input options, Option A or Option B. This can be customized based on your model, and the number of inputs desired. Note that this is wrapped inside of a <strong>fluidPage()</strong>, which simply creates a basic page layout that can support rows and columns if so desired. Breaking down this tab further, we have <strong>sidebarLayout()</strong> defining the layout of this page with a sidebar panel and a main panel. Within the sidebar panel, we have inserted a <strong>selectInput</strong>, which will allow us to have reactive pages.</p>
<p>Note that I have used HTML formatting for the Discussion and About pages.</p>
</div>
<div id="setting-up-the-server" class="section level3">
<h3><span class="header-section-number">1.3.2</span> Setting up the Server</h3>
<p>The server function is where we perform our backend logic for our app. We can put any R code there to create plots or tables as needed. The inputs come from UI definitions, like <strong>selectInput()</strong> or <strong>sliderInput()</strong>. In our UI example, we used a select input named “plot_type”, which had two options: A or B. The outputs are defined within the server function, and then rendered as defined in the UI. In our UI example, we want to render a <strong>plotOutput</strong> named “line_plot”.</p>
<p>So our server function would ideally use the <strong>plot_type</strong> input to create a <strong>line_plot</strong>. An example of a basic server function might be something like this:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode markdown"><code class="sourceCode markdown"><span id="cb2-1"><a href="#cb2-1"></a>server &lt;- function(input, output) {</span>
<span id="cb2-2"><a href="#cb2-2"></a><span class="bn">    output$line_plot &lt;- renderPlot({</span></span>
<span id="cb2-3"><a href="#cb2-3"></a><span class="bn">        # Generate type based on input$plot_type from ui</span></span>
<span id="cb2-4"><a href="#cb2-4"></a><span class="bn">        </span></span>
<span id="cb2-5"><a href="#cb2-5"></a><span class="bn">        ifelse(</span></span>
<span id="cb2-6"><a href="#cb2-6"></a><span class="bn">            input$plot_type == &quot;a&quot;,</span></span>
<span id="cb2-7"><a href="#cb2-7"></a><span class="bn">            </span></span>
<span id="cb2-8"><a href="#cb2-8"></a><span class="bn">            # If input$plot_type is &quot;a&quot;, plot histogram of &quot;waiting&quot; column </span></span>
<span id="cb2-9"><a href="#cb2-9"></a><span class="bn">            # from the faithful dataframe</span></span>
<span id="cb2-10"><a href="#cb2-10"></a><span class="bn">            </span></span>
<span id="cb2-11"><a href="#cb2-11"></a><span class="bn">            x   &lt;- faithful[, 2],</span></span>
<span id="cb2-12"><a href="#cb2-12"></a><span class="bn">            </span></span>
<span id="cb2-13"><a href="#cb2-13"></a><span class="bn">            # If input$plot_type is &quot;b&quot;, plot histogram of &quot;eruptions&quot; column</span></span>
<span id="cb2-14"><a href="#cb2-14"></a><span class="bn">            # from the faithful dataframe</span></span>
<span id="cb2-15"><a href="#cb2-15"></a><span class="bn">            </span></span>
<span id="cb2-16"><a href="#cb2-16"></a><span class="bn">            x   &lt;- faithful[, 1]</span></span>
<span id="cb2-17"><a href="#cb2-17"></a><span class="bn">        )</span></span>
<span id="cb2-18"><a href="#cb2-18"></a><span class="bn">        </span></span>
<span id="cb2-19"><a href="#cb2-19"></a><span class="bn">        # Draw the histogram with the specified number of bins</span></span>
<span id="cb2-20"><a href="#cb2-20"></a><span class="bn">        </span></span>
<span id="cb2-21"><a href="#cb2-21"></a><span class="bn">        hist(x, col = &#39;darkgray&#39;, border = &#39;white&#39;)</span></span>
<span id="cb2-22"><a href="#cb2-22"></a><span class="bn">    })</span></span>
<span id="cb2-23"><a href="#cb2-23"></a>}</span></code></pre></div>
</div>
</div>
<div id="organization" class="section level2">
<h2><span class="header-section-number">1.4</span> Organization</h2>
<p>Now that we have the basic app running, let’s talk about organization. One common problem that shows up a lot is that people tend to throw all of their code into their app.R file, causing it to grow to be hundreds or even thousands of lines of code long. This happens easily because not only can backend logic be written into the server function, but additionally entire HTML or markdown pages can be formatted in the UI section. Here are a few ways to stop the app.R file from becoming incredibly messy.</p>
<ul>
<li>First, you can put all large blocks of text into separate files. For example, we could take the HTML formatting from the “About” tab section and put it into a separate about.html file, or similarly format the same section using markdown. Then you would simply use the shiny function <strong>includeHTML()</strong> or <strong>includeMarkdown()</strong> to insert your file contents.</li>
<li>Second, put as much prep work as possible into a separate (or multiple separate) R file. This is helpful for readability, as it will generate more small files, but it is also helpful in that the app will not have to run all of the heavy prep calculations while it’s trying to load. For this, a tip is to perform heavy operations in a document titled prep-shiny.R, for example, and to save any helpful outputs as graphic images or gifs, or as rds files that can then be loaded into the app.R file.</li>
<li>Third, keep your repository clean. Do not save unneccessary raw data files or the like to your repository, as this may just create clutter. Make sure to update your .gitignore file with anything that you would not like to have on your Github repository or on the Shiny App. This includes the .Rproj file, raw data files, and cache files.</li>
</ul>
</div>
<div id="customizations" class="section level2">
<h2><span class="header-section-number">1.5</span> Customizations</h2>
<p>Finally, we can take a look at a simple way to customize the look of your Shiny App. The package <strong>shinythemes</strong> can easily be added to give your app a theme. The <a href="http://rstudio.github.io/shinythemes/">shinythemes website</a> displays the various themes quite nicely, and you can use the <a href="https://shiny.rstudio.com/gallery/shiny-theme-selector.html">theme selector</a> to click through different themes.</p>
<p>The <a href="https://shiny.rstudio.com/gallery/">Shiny gallery</a> is helpful for browsing through different layouts and types of visualization for inspiration.</p>
</div>
<!-- </div> -->
<!--bookdown:body:end-->



</body>
</html>
